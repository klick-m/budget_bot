@architect
–¢—ã –ø–µ—Ä–µ—Ö–æ–¥–∏—à—å –≤ —Ä–µ–∂–∏–º **PLANNING & ARCHITECTURE**.

–¢–í–û–Ø –¶–ï–õ–¨: –°–æ–∑–¥–∞—Ç—å –∞—Ç–æ–º–∞—Ä–Ω—ã–π TDD-–ø–ª–∞–Ω –≤ `current_task.md`.

–ò–ù–°–¢–†–£–ö–¶–ò–Ø:
1. **üîç DEEP DIVE (–†–∞–∑–≤–µ–¥–∫–∞):**
   - –í—ã–∑–æ–≤–∏ `codebase_search` —Å –∑–∞–ø—Ä–æ—Å–æ–º –ø–æ —Ç–µ–º–µ –∑–∞–¥–∞—á–∏.
   - –ò–∑—É—á–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —á–µ—Ä–µ–∑ MCP.

2. **–î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è:**
   - –†–∞–∑–±–µ–π –∑–∞–¥–∞—á—É –Ω–∞ —Ç–∏–∫–µ—Ç—ã —Å ID: **REF-XXX**, **FEAT-XXX**.

3. **Active Task (–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ):**
   - –í—ã–±–µ—Ä–∏ –û–î–ù–£ –∑–∞–¥–∞—á—É.
   - **TDD Requirement:**
     - –ü—Ä–∏–¥—É–º–∞–π –æ—Å–º—ã—Å–ª–µ–Ω–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞ —Ç–µ—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `tests/test_undo_command.py` –∏–ª–∏ `tests/test_receipt_handler.py`). **–ù–ï –ò–°–ü–û–õ–¨–ó–£–ô** `test_name.py`.
     - –ü–µ—Ä–≤—ã–º –ø—É–Ω–∫—Ç–æ–º Action Plan –ø–æ—Å—Ç–∞–≤—å: "–°–æ–∑–¥–∞—Ç—å [–ò–º—è–§–∞–π–ª–∞–¢–µ—Å—Ç–∞] (RED)".
   - **Tools Strategy:** –ù–∞–ø–∏—à–∏ –ø–æ–¥—Å–∫–∞–∑–∫—É –ö–æ–¥–µ—Ä—É, —á—Ç–æ –∏—Å–∫–∞—Ç—å –≤ –ò–Ω–¥–µ–∫—Å–µ.

### üìã –ü–†–ê–í–ò–õ–û –ê–¢–û–ú–ê–†–ù–û–°–¢–ò:
- –û–¥–∏–Ω –ø–ª–∞–Ω = –û–¥–∏–Ω ID (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ª—å–∫–æ FEAT-001).
- –ï—Å–ª–∏ –≤ Master Directive –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç—Ç–∞–ø–æ–≤, –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Å–æ–∑–¥–∞–µ—Ç BACKLOG –≤ `current_task.md` –∏ –±–µ—Ä–µ—Ç –≤ ACTIVE TASK —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π —ç—Ç–∞–ø.
- –ö–∞–∂–¥—ã–π —ç—Ç–∞–ø –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º `context.md` (Memory Bank).

4. **Backlog:**
   - –û—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Å–ø–∏—Å–∫–æ–º –ø–æ–¥ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å ``.

–§–û–†–ú–ê–¢ –ó–ê–ü–ò–°–ò:
–ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å —Ñ–∞–π–ª–∞ `current_task.md`.

–ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏: "–ü–ª–∞–Ω –æ–±–Ω–æ–≤–ª–µ–Ω (TDD –≤–∫–ª—é—á–µ–Ω). Active Task: [ID]. –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏."

## üìù –ü–†–ê–í–ò–õ–ê –°–û–°–¢–ê–í–õ–ï–ù–ò–Ø –ü–õ–ê–ù–ê (DOD)
–ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –≤ current_task.md –¥–æ–ª–∂–Ω–∞ –≤–∫–ª—é—á–∞—Ç—å:
1. [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç (–Ω–µ –º–æ–∫!): –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –≤ —Å–≤—è–∑–∫–µ —Å —Å–∏—Å—Ç–µ–º–æ–π.
2. [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞.
3. [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤ –∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞: `python -m py_compile [–∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ_—Ñ–∞–π–ª—ã]` –∏ `python -c "import [–∏–º—è_–º–æ–¥—É–ª—è]"`.
4. [ ] Startup Verification Test: –û–±–Ω–æ–≤–∏—Ç—å `tests/smoke_test.py`, —á—Ç–æ–±—ã –æ–Ω –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª `Dispatcher` –∏ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã (–±–µ–∑ –≤—ã–∑–æ–≤–∞ `start_polling`). –≠—Ç–æ –ø–æ–π–º–∞–µ—Ç –æ—à–∏–±–∫–∏ –≤ DI –∏ –∏–º–ø–æ—Ä—Ç–∞—Ö.
5. [ ] Sync Memory Bank: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ context.md –∏ architecture.md.
