# Контекст: Проект Budget Bot

## Текущий фокус

Проект Budget Bot - это Telegram-бот для автоматизированного ведения личного бюджета, который минимизирует усилия пользователя за счет автоматического распознавания чеков (QR-коды) и обработки естественного языка ("умный ввод"). Система реализует архитектуру Local-First с надежной синхронизацией с Google Таблицами для отчетности и аналитики.

## Последние изменения

- Реализация архитектуры Local-First с SQLite в качестве основного хранилища и фоновой синхронизацией с Google Таблицами
- Интеграция классификации транзакций на основе машинного обучения с использованием TF-IDF и частотного анализа
- Добавление pymorphy3 для лемматизации русского текста с целью улучшения распознавания категорий
- Реализация системы словаря ключевых слов с поддержкой биграмм и коэффициентов достоверности
- Разработка парсера умного ввода для ввода транзакций с естественным языком
- Создание рабочих процессов FSM (Конечный автомат) для ввода и редактирования транзакций
- Реализация комплексной обработки ошибок для сетевых, API и файловых операций
- Улучшенная реализация безопасности с фильтром ALLOWED_USER_IDS для ограничения доступа к боту только авторизованным пользователям

## Следующие шаги

- Устранение критических уязвимостей безопасности, выявленных в ходе code review
- Улучшение обработки ошибок с заменой общих обработчиков на конкретные типы исключений
- Внедрение строгой валидации данных на всех уровнях приложения
- Реализация архитектурных улучшений: внедрение зависимостей, улучшение Local-First подхода, устранение глобального состояния
- Улучшение модели классификации машинного обучения с дополнительными обучающими данными
- Повышение точности распознавания чеков и добавление поддержки большего количества форматов чеков
- Расширение парсера умного ввода для обработки более сложных форматов транзакций
- Реализация более сложных механизмов проверки данных и восстановления после ошибок
- Добавление более комплексных возможностей логирования и мониторинга