# KiloCode Workflow Rules

–≠—Ç–æ—Ç —Ñ–∞–π–ª –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–∫–æ–Ω—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∞–≥–µ–Ω—Ç–æ–≤.
–ù–∞—Ä—É—à–µ–Ω–∏–µ —ç—Ç–∏—Ö –ø—Ä–∞–≤–∏–ª –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ —Å–±–æ—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.

## üõ° STARTUP INTEGRITY PROTOCOL
1. **–ó–∞–ø—Ä–µ—Ç –Ω–∞ —Å–ª–µ–ø—É—é –≤–µ—Ä—É:** –¢–µ—Å—Ç—ã –≤ –∏–∑–æ–ª—è—Ü–∏–∏ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞.
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏:** –ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞, –º–µ–Ω—è—é—â–∞—è `main.py` –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫, –û–ë–Ø–ó–ê–ù–ê –≤–∫–ª—é—á–∞—Ç—å –∑–∞–ø—É—Å–∫ `python -m py_compile` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞.
3. **–°–±–æ—Ä–∫–∞ DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:** –°–º–æ—É–∫-—Ç–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –∏–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤), —á—Ç–æ–±—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å, —á—Ç–æ –¥–µ—Ä–µ–≤–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–µ —Å–ª–æ–º–∞–Ω–æ.
4. **No Token, No Problem:** –í—Å–µ —Ç–µ—Å—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Mock-—Ç–æ–∫–µ–Ω, —á—Ç–æ–±—ã –Ω–µ –ø–∞–¥–∞—Ç—å –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Å–µ—Ç–∏.

## üß† INTELLIGENCE PROTOCOL (MANDATORY)
–ê–≥–µ–Ω—Ç—ã –û–ë–Ø–ó–ê–ù–´ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã KiloCode (`codebase_search`, MCP) –≤–º–µ—Å—Ç–æ —Å–ª–µ–ø–æ–≥–æ —á—Ç–µ–Ω–∏—è.
* **Codebase Index:** –ò—Å–ø–æ–ª—å–∑—É–π `codebase_search` –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –ø–æ–∏—Å–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
* **MCP Context:** –ó–∞–ø—Ä–∞—à–∏–≤–∞–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –±–∏–±–ª–∏–æ—Ç–µ–∫ —á–µ—Ä–µ–∑ MCP —Å–µ—Ä–≤–µ—Ä `context7`.
* **–ü—Ä–∞–≤–∏–ª–æ:** "–°–Ω–∞—á–∞–ª–∞ —Ä–∞–∑–≤–µ–¥–∫–∞ —á–µ—Ä–µ–∑ –ò–Ω–¥–µ–∫—Å ‚Äî –ø–æ—Ç–æ–º –±–æ–π".

## üõë MASTER DIRECTIVE PROTOCOL
1. **–ò—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã:** "Master Directive" ‚Äî —ç—Ç–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç Chief Software Architect (CSA).
2. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏–∑ Master Directive –∏–º–µ—é—Ç –≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –∞–≥–µ–Ω—Ç–∞.
3. **–î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è:** –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ Master Directive, –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –û–ë–Ø–ó–ê–ù —Ä–∞–∑–±–∏—Ç—å –µ—ë –Ω–∞ –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –∑–∞–¥–∞—á–∏ (ID: FEAT-..., REF-...) –∏ –ø–æ–º–µ—Å—Ç–∏—Ç—å –≤ BACKLOG —Ñ–∞–π–ª–∞ `current_task.md`.

## üß™ TDD PROTOCOL (MANDATORY)
–í–µ—Å—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–¥ –ø–∏—à–µ—Ç—Å—è –ø–æ —Ü–∏–∫–ª—É **RED -> GREEN -> REFACTOR**.
1. **RED:** –°–æ–∑–¥–∞–π —Ç–µ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–∞–¥–∞–µ—Ç.
2. **GREEN:** –ù–∞–ø–∏—à–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞.
3. **REFACTOR:** –£–ª—É—á—à–∏ –∫–æ–¥ (—á–∏—Å—Ç–æ—Ç–∞, —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã), –Ω–µ –ª–æ–º–∞—è —Ç–µ—Å—Ç—ã.
*–ë–µ–∑ –ø–∞–¥–∞—é—â–µ–≥–æ —Ç–µ—Å—Ç–∞ –Ω–∞—á–∏–Ω–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∑–∞–ø—Ä–µ—â–µ–Ω–æ.*

## üß™ INTEGRITY & RUNTIME PROTOCOL
1. **–ó–∞–ø—Ä–µ—Ç –Ω–∞ Mock-–ø—É—Å—Ç—ã—à–∫–∏:** –ó–∞–ø—Ä–µ—â–µ–Ω–æ –ø–æ–¥–º–µ–Ω—è—Ç—å (mock) –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –ª–æ–≥–∏–∫—É —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ —Å–º–æ—É–∫-—Ç–µ—Å—Ç–∞—Ö. –¢–æ–ª—å–∫–æ –≤–Ω–µ—à–Ω–∏–µ API (Telegram, Google Sheets).
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:** –°–º–æ—É–∫-—Ç–µ—Å—Ç –û–ë–Ø–ó–ê–ù –≤—ã–∑–≤–∞—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤—Å–µ—Ö —Ä–æ—É—Ç–µ—Ä–æ–≤. 
3. **Static Analysis:** –ü–µ—Ä–µ–¥ —Ñ–∏–∫—Å–∞—Ü–∏–µ–π –∑–∞–¥–∞—á–∏ –ö–æ–¥–µ—Ä –æ–±—è–∑–∞–Ω –≤—ã–ø–æ–ª–Ω–∏—Ç—å `python -m py_compile main.py`. –ï—Å–ª–∏ –µ—Å—Ç—å SyntaxError –∏–ª–∏ ImportError ‚Äî –∑–∞–¥–∞—á–∞ –ø—Ä–æ–≤–∞–ª–µ–Ω–∞.

## üêç VIRTUAL ENVIRONMENT PROTOCOL
**–ó–ê–ü–†–ï–©–ï–ù–û** –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–¥ –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏.
* –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π `.venv`.
* –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞: `call .venv\Scripts\activate && python ...` (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥).

## üõ° ATOMIC TASK PROTOCOL (ENFORCED)
1. **–û–¥–Ω–∞ –∑–∞–¥–∞—á–∞ ‚Äî –û–¥–∏–Ω ID:** –í üü¢ ACTIVE TASK –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –û–î–ò–ù ID (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ª—å–∫–æ REF-009). –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ FEAT –∏ REF –≤ –æ–¥–Ω—É –∑–∞–¥–∞—á—É ‚Äî –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê.
2. **–ó–∞–ø—Ä–µ—Ç –Ω–∞ "Wide Plan":** –ï—Å–ª–∏ –ø–ª–∞–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –±–æ–ª–µ–µ 5 —à–∞–≥–æ–≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –û–ë–Ø–ó–ê–ù —Ä–∞–∑–±–∏—Ç—å –µ–≥–æ –Ω–∞ –ø–æ–¥–∑–∞–¥–∞—á–∏ –≤ BACKLOG.
3. **Memory Bank Sync:** –ó–∞–¥–∞—á–∞ –Ω–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π, –ø–æ–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –æ—Ç—Ä–∞–∂–µ–Ω—ã –≤ context.md –∏ architecture.md.

### 1. –§–æ—Ä–º–∞—Ç –¢–∏–∫–µ—Ç–æ–≤ (Task IDs)
–ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –û–ë–Ø–ó–ê–ù–ê –∏–º–µ—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID:
- **REF-XXX**: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è).
- **FEAT-XXX**: –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.
- **FIX-XXX**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤.
- **CHORE-XXX**: –ö–æ–Ω—Ñ–∏–≥–∏, —Ç–µ—Å—Ç—ã.

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `current_task.md`
–§–∞–π–ª —Å–æ—Å—Ç–æ–∏—Ç –°–¢–†–û–ì–û –∏–∑ –¥–≤—É—Ö —Å–µ–∫—Ü–∏–π:

#### üü¢ ACTIVE TASK
**–†–æ–≤–Ω–æ –û–î–ù–ê** –∑–∞–¥–∞—á–∞.
- **Header:** `[ID] Title`
- **Context:** –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ.
- **TDD Strategy:** –£–∫–∞–∑–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —Ç–µ—Å—Ç–∞ (–Ω–∞–ø—Ä. `tests/test_undo.py`).
- **Tools Strategy:** –ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ –ò–Ω–¥–µ–∫—Å–µ?
- **Action Plan:** –î–µ—Ç–∞–ª—å–Ω—ã–µ —à–∞–≥–∏ (Red -> Green -> Refactor).

``

#### üü° BACKLOG
–°–ø–∏—Å–æ–∫ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á.
–§–æ—Ä–º–∞—Ç: `- [ ] **[ID]** Title`

## üëÆ –†–û–õ–ï–í–ê–Ø –ú–ê–¢–†–ò–¶–ê (RBAC)

### üß† ARCHITECT (Planning)
* **Start:** –ù–∞—á–∏–Ω–∞–π —Å `codebase_search` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.
* **Action:** –î–µ–∫–æ–º–ø–æ–∑–∏—Ä—É–π –∑–∞–¥–∞—á—É. –ü—Ä–∏—Å–≤–æ–π ID. –û–ø—Ä–µ–¥–µ–ª–∏ –∏–º—è —Ç–µ—Å—Ç–∞.
* **Limit:** –ù–µ –ø–∏—à–∏ –∫–æ–¥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

### üë®‚Äçüíª CODER (Implementation)
* **Start:** Impact Analysis —á–µ—Ä–µ–∑ –ò–Ω–¥–µ–∫—Å.
* **Action:** –í—ã–ø–æ–ª–Ω–∏ TDD —Ü–∏–∫–ª (Red-Green-Refactor) –≤ `.venv`.
* **Limit:** –ù–µ —Å–º–æ—Ç—Ä–∏ –≤ Backlog. –ù–µ –ø–∏—à–∏ –∫–æ–¥ –±–µ–∑ —Ç–µ—Å—Ç–∞.

### ‚úÖ QA (Acceptance)
* **Start:** –ü—Ä–æ–≤–µ—Ä—å –Ω–∞–ª–∏—á–∏–µ —Ç–µ—Å—Ç–∞ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∞.
* **Action:** –ó–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç—ã –≤ `.venv`.